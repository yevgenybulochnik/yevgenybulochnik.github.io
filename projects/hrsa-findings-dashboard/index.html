<!DOCTYPE html><html lang="en"><head><meta name="generator" content="React Static"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, shrink-to-fit=no"/><link rel="preload" as="script" href="https://yevgenybulochnik.com/templates/styles.cbe4e1b7.js"/><link rel="preload" as="script" href="https://yevgenybulochnik.com/templates/__react_static_root__/src/containers/Project.0853c3cf.js"/><link rel="preload" as="script" href="https://yevgenybulochnik.com/templates/vendors~main.386d9600.js"/><link rel="preload" as="script" href="https://yevgenybulochnik.com/main.b937522b.js"/><link rel="preload" as="style" href="https://yevgenybulochnik.com/styles.1bb5eef5.css"/><link rel="stylesheet" href="https://yevgenybulochnik.com/styles.1bb5eef5.css"/></head><body><div id="root"><div style="outline:none" tabindex="-1"><div class="bp3-navbar nav"><div class="bp3-navbar-group bp3-align-left"><div class="bp3-navbar-heading"><strong>Yevgeny Bulochnik</strong></div><div class="bp3-navbar-divider"></div></div><div class="bp3-navbar-group bp3-align-left nav-tabs-desktop"><a href="https://yevgenybulochnik.com/"><button type="button" class="bp3-button bp3-minimal"><span icon="home" class="bp3-icon bp3-icon-home"><svg data-icon="home" width="16" height="16" viewBox="0 0 16 16"><desc>home</desc><path d="M2 10v5c0 .55.45 1 1 1h3v-5h4v5h3c.55 0 1-.45 1-1v-5L8 4l-6 6zm13.71-2.71L14 5.59V2c0-.55-.45-1-1-1s-1 .45-1 1v1.59L8.71.29C8.53.11 8.28 0 8 0s-.53.11-.71.29l-7 7a1.003 1.003 0 001.42 1.42L8 2.41l6.29 6.29c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71z" fill-rule="evenodd"></path></svg></span><span class="bp3-button-text">Home</span></button></a><a href="https://yevgenybulochnik.com/about"><button type="button" class="bp3-button bp3-minimal"><span icon="person" class="bp3-icon bp3-icon-person"><svg data-icon="person" width="16" height="16" viewBox="0 0 16 16"><desc>person</desc><path d="M15.68 14.32c-.46-1.05-2.68-1.75-4.16-2.4-1.48-.65-1.28-1.05-1.33-1.59-.01-.07-.01-.15-.01-.23.51-.45.92-1.07 1.19-1.78 0 0 .01-.04.02-.05.06-.15.11-.32.15-.48.34-.07.54-.44.61-.78.08-.14.23-.48.2-.87-.05-.5-.25-.73-.47-.82v-.09c0-.63-.06-1.55-.17-2.15A3.671 3.671 0 0010.32.72C9.68.25 8.79-.01 8-.01c-.79 0-1.68.25-2.31.73-.61.47-1.06 1.13-1.28 1.86-.05.17-.09.33-.11.5-.12.6-.17 1.51-.17 2.15v.08c-.24.09-.45.32-.5.83-.03.38.13.72.2.86.08.35.28.72.63.78.04.17.09.33.15.49 0 .01.01.02.01.03l.01.01c.27.72.7 1.35 1.22 1.8 0 .07-.01.14-.01.21-.05.54.1.94-1.37 1.59-1.48.65-3.7 1.35-4.16 2.4-.46 1.05-.27 1.67-.27 1.67h15.92c-.01.01.18-.61-.28-1.66z" fill-rule="evenodd"></path></svg></span><span class="bp3-button-text">About</span></button></a><a href="https://yevgenybulochnik.com/articles"><button type="button" class="bp3-button bp3-minimal"><span icon="applications" class="bp3-icon bp3-icon-applications"><svg data-icon="applications" width="16" height="16" viewBox="0 0 16 16"><desc>applications</desc><path d="M3.5 11h2c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-2c-.28 0-.5.22-.5.5s.22.5.5.5zm0-2h5c.28 0 .5-.22.5-.5S8.78 8 8.5 8h-5c-.28 0-.5.22-.5.5s.22.5.5.5zM11 4H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h10c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zm-1 10H2V7h8v7zm5-14H5c-.55 0-1 .45-1 1v2h2V2h8v7h-1v2h2c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1zM3.5 13h3c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-3c-.28 0-.5.22-.5.5s.22.5.5.5z" fill-rule="evenodd"></path></svg></span><span class="bp3-button-text">Articles</span></button></a><a href="https://yevgenybulochnik.com/projects"><button type="button" class="bp3-button bp3-minimal"><span icon="application" class="bp3-icon bp3-icon-application"><svg data-icon="application" width="16" height="16" viewBox="0 0 16 16"><desc>application</desc><path d="M3.5 7h7c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-7c-.28 0-.5.22-.5.5s.22.5.5.5zM15 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h14c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm-1 12H2V5h12v8zM3.5 9h4c.28 0 .5-.22.5-.5S7.78 8 7.5 8h-4c-.28 0-.5.22-.5.5s.22.5.5.5zm0 2h5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-5c-.28 0-.5.22-.5.5s.22.5.5.5z" fill-rule="evenodd"></path></svg></span><span class="bp3-button-text">Projects</span></button></a></div><div class="bp3-navbar-group bp3-align-right nav-tabs-mobile"><span class="bp3-popover-wrapper"><span class="bp3-popover-target"><button type="button" class="bp3-button nav-button-mobile"><span class="bp3-button-text">Menu</span></button></span></span></div></div><div class="content"><div style="outline:none" tabindex="-1"><div class="project"><h1 id="hrsa-findings-dashboard">HRSA Findings Dashboard</h1>
<h3 id="demo"><a href="https://yevgenybulochnik.com/hrsa-findings-dashboard">Demo</a></h3>
<p>This project really came out of my completion of the <a href="https://www.apexus.com/340b-certificate-program">340B ACE</a> certification. After completing the program, immediately my mind went to finding data and outcomes related to audits. As it turns out the <a href="https://www.hrsa.gov/">Health Resources and Services Administration</a>, otherwise known as HRSA, publishes some of its national audit findings.</p>
<h4 id="hrsa-program-integerity">HRSA Program Integerity</h4>
<hr/>
<p>HRSA 340B program findings are periodically updated <a href="https://www.hrsa.gov/opa/program-integrity/index.html">here</a>. The findings are split out by year, and available in the right sidebar under a section called <strong>Audits of Covered Entity Results</strong>. Each page of findings contains a single HTML table with data associated with the respective entity&#x27;s audit.</p>
<img src="https://assets.yevgenybulochnik.com/hrsa_findings_table.png" width="100%"/>

<p>You may already see some issues with the way this is setup. For example, how about these questions:</p>
<ul>
<li>How many audits happen yearly?</li>
<li>How many audits have been completed in general over time?</li>
<li>How often are there actually findings as a result of an audit?</li>
<li>What are the most common findings?</li>
<li>How frequently do audits occur in my state?</li>
</ul>
<p>With how this data is being presented, these seemingly basic questions are actually fairly difficult to answer. Moreover, one might think a simple copy paste into an excel document, plus a pivot table would do the trick. This, however, produces some erroneous rows occasionally. Not to mention it requires quite a bit of manual data munging.</p>
<h4 id="the-beauty-in-automation">The Beauty in Automation</h4>
<hr/>
<p>From the start I wanted to create an automated solution for data collection, data munging and data processing. Enter the amazing open source python web crawler <a href="https://scrapy.org/">Scrapy</a>. Using scrapy&#x27;s built in <a href="https://docs.scrapy.org/en/latest/topics/items.html">Items</a>, <a href="https://docs.scrapy.org/en/latest/topics/loaders.html">Itemloaders</a> and <a href="https://docs.scrapy.org/en/latest/topics/item-pipeline.html">Pipelines</a> creating more structured data was a breeze. Also, scrapy provided a method for cleaning up the sometimes unstructured html table tags. Below is the example code used to scrape elements from those tables. </p>
<pre><code class="language-python"><span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> table_rows:
    il = <span class="hljs-constructor">ItemLoader(<span class="hljs-params">item</span>=HrsafindingsItem()</span>, selector=row)
    il.add<span class="hljs-constructor">_value(&#x27;<span class="hljs-params">year</span>&#x27;, Path(<span class="hljs-params">response</span>.<span class="hljs-params">request</span>.<span class="hljs-params">url</span>)</span>.stem)
    il.add<span class="hljs-constructor">_xpath(&#x27;<span class="hljs-params">entity</span>&#x27;, &#x27;.<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">th</span><span class="hljs-operator">/</span><span class="hljs-params">text</span>()</span>&#x27;)
    il.add<span class="hljs-constructor">_xpath(&#x27;<span class="hljs-params">entity</span>&#x27;, &#x27;.<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">th</span><span class="hljs-operator">/</span><span class="hljs-params">child</span>::<span class="hljs-operator">*</span>&#x27;)</span>
    il.add<span class="hljs-constructor">_xpath(&#x27;<span class="hljs-params">hrsa_id</span>&#x27;, &#x27;.<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">td</span>[1]<span class="hljs-operator">/</span><span class="hljs-params">text</span>()</span>&#x27;)
    il.add<span class="hljs-constructor">_xpath(&#x27;<span class="hljs-params">hrsa_id</span>&#x27;, &#x27;.<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">td</span>[1]<span class="hljs-operator">/</span><span class="hljs-params">child</span>::<span class="hljs-operator">*</span>&#x27;)</span>
    il.add<span class="hljs-constructor">_xpath(&#x27;<span class="hljs-params">state</span>&#x27;, &#x27;.<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">td</span>[2]<span class="hljs-operator">/</span><span class="hljs-params">text</span>()</span>&#x27;)
    il.add<span class="hljs-constructor">_xpath(&#x27;<span class="hljs-params">state</span>&#x27;, &#x27;.<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">td</span>[2]<span class="hljs-operator">/</span><span class="hljs-params">child</span>::<span class="hljs-operator">*</span>&#x27;)</span>
    il.add<span class="hljs-constructor">_xpath(&#x27;<span class="hljs-params">opa_findings</span>&#x27;, &#x27;.<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">td</span>[3]<span class="hljs-operator">/</span><span class="hljs-params">text</span>()</span>&#x27;)
    il.add<span class="hljs-constructor">_xpath(&#x27;<span class="hljs-params">opa_findings</span>&#x27;, &#x27;.<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">td</span>[3]<span class="hljs-operator">/</span><span class="hljs-params">child</span>::<span class="hljs-operator">*</span>&#x27;)</span>
    il.add<span class="hljs-constructor">_xpath(&#x27;<span class="hljs-params">sanction</span>&#x27;, &#x27;.<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">td</span>[4]&#x27;)</span>
    il.add<span class="hljs-constructor">_xpath(&#x27;<span class="hljs-params">cap_status</span>&#x27;, &#x27;.<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">td</span>[5]<span class="hljs-operator">/</span><span class="hljs-params">text</span>()</span>&#x27;)
    il.add<span class="hljs-constructor">_xpath(&#x27;<span class="hljs-params">cap_status</span>&#x27;, &#x27;.<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">td</span>[5]<span class="hljs-operator">/</span><span class="hljs-params">child</span>::<span class="hljs-operator">*</span>&#x27;)</span>
    il.add<span class="hljs-constructor">_xpath(&#x27;<span class="hljs-params">entity_contact</span>&#x27;, &#x27;.<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">td</span>[6]&#x27;)</span>
    yield il.load<span class="hljs-constructor">_item()</span></code></pre>
<p>To get around some of the funny HTML structure, calls to the same item keys, <code>opa_findings</code> for example, are used to concatenate text used in multiple HTML elements. This is necessary due to some of the table rows having sometimes hidden characters or unexpected HTML tags which are not immediately obvious to the naked eye.</p>
<p>In addition, custom functions were used to further sanitize the data, including regular expressions to &quot;tag&quot; each record based on finding type for better filtering. An example of a parsed row is below:</p>
<pre><code class="language-json">{
    <span class="hljs-attr">&quot;year&quot;</span>: <span class="hljs-string">&quot;fy-20-results&quot;</span>,
    <span class="hljs-attr">&quot;entity&quot;</span>: <span class="hljs-string">&quot;Ascension Seton DBA Ascension Seton Medical Center Austin&quot;</span>,
    <span class="hljs-attr">&quot;hrsa_id&quot;</span>: <span class="hljs-string">&quot;DSH450056&quot;</span>,
    <span class="hljs-attr">&quot;state&quot;</span>: <span class="hljs-string">&quot;TX&quot;</span>,
    <span class="hljs-attr">&quot;opa_findings&quot;</span>: <span class="hljs-string">&quot;No adverse findings&quot;</span>,
    <span class="hljs-attr">&quot;sanction&quot;</span>: <span class="hljs-string">&quot;None&quot;</span>,
    <span class="hljs-attr">&quot;cap_status&quot;</span>: <span class="hljs-string">&quot;N/A--Audit closure date: April 29, 2020&quot;</span>,
    <span class="hljs-attr">&quot;entity_contact&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
    <span class="hljs-attr">&quot;full_year&quot;</span>: <span class="hljs-string">&quot;2020&quot;</span>,
    <span class="hljs-attr">&quot;entity_abv&quot;</span>: <span class="hljs-string">&quot;DSH&quot;</span>,
    <span class="hljs-attr">&quot;closure_date&quot;</span>: <span class="hljs-string">&quot;April 29, 2020&quot;</span>,
    <span class="hljs-attr">&quot;tags&quot;</span>: <span class="hljs-string">&quot;no_findings&quot;</span>
}</code></pre>
<p>With all this a single command <code>scrapy crawl findings_spider</code>, will automatically find all the HRSA Program Integrity HTML tables, parse all those tables, and clean up that data to get a single structured json file.</p>
<h4 id="the-rest-api">The Rest API</h4>
<hr/>
<p>The next step was to make this data easily consumable. I decided to use <a href="https://flask.palletsprojects.com">Flask</a> and a serialization library called <a href="https://marshmallow.readthedocs.io">Marshmallow</a> to build out a simple rest api.</p>
<h3 id="the-dashboard">The Dashboard</h3>
<hr/>
<p>Lastly, the dashboard itself was built using Typescript and React.</p></div></div></div></div></div><script type="text/javascript">window.__routeInfo = JSON.parse("{\"template\":\"__react_static_root__/src/containers/Project\",\"sharedHashesByProp\":{},\"data\":{\"project\":{\"title\":\"HRSA Findings Dashboard\",\"slug\":\"hrsa-findings-dashboard\",\"desc\":\"This fullstack project uses flask as an api and React for the frontend. Data is scraped from HRSA, manipulated and fed into a filterable dashboard\",\"published\":\"9-17-2020\",\"tags\":[\"FullStack\",\"Python\",\"Flask\",\"React\",\"Scrapy\"],\"contents\":\"<h1 id=\\\"hrsa-findings-dashboard\\\">HRSA Findings Dashboard</h1>\\n<h3 id=\\\"demo\\\"><a href=\\\"https://yevgenybulochnik.com/hrsa-findings-dashboard\\\">Demo</a></h3>\\n<p>This project really came out of my completion of the <a href=\\\"https://www.apexus.com/340b-certificate-program\\\">340B ACE</a> certification. After completing the program, immediately my mind went to finding data and outcomes related to audits. As it turns out the <a href=\\\"https://www.hrsa.gov/\\\">Health Resources and Services Administration</a>, otherwise known as HRSA, publishes some of its national audit findings.</p>\\n<h4 id=\\\"hrsa-program-integerity\\\">HRSA Program Integerity</h4>\\n<hr>\\n<p>HRSA 340B program findings are periodically updated <a href=\\\"https://www.hrsa.gov/opa/program-integrity/index.html\\\">here</a>. The findings are split out by year, and available in the right sidebar under a section called <strong>Audits of Covered Entity Results</strong>. Each page of findings contains a single HTML table with data associated with the respective entity&#39;s audit.</p>\\n<img src=\\\"https://assets.yevgenybulochnik.com/hrsa_findings_table.png\\\" width=\\\"100%\\\">\\n\\n<p>You may already see some issues with the way this is setup. For example, how about these questions:</p>\\n<ul>\\n<li>How many audits happen yearly?</li>\\n<li>How many audits have been completed in general over time?</li>\\n<li>How often are there actually findings as a result of an audit?</li>\\n<li>What are the most common findings?</li>\\n<li>How frequently do audits occur in my state?</li>\\n</ul>\\n<p>With how this data is being presented, these seemingly basic questions are actually fairly difficult to answer. Moreover, one might think a simple copy paste into an excel document, plus a pivot table would do the trick. This, however, produces some erroneous rows occasionally. Not to mention it requires quite a bit of manual data munging.</p>\\n<h4 id=\\\"the-beauty-in-automation\\\">The Beauty in Automation</h4>\\n<hr>\\n<p>From the start I wanted to create an automated solution for data collection, data munging and data processing. Enter the amazing open source python web crawler <a href=\\\"https://scrapy.org/\\\">Scrapy</a>. Using scrapy&#39;s built in <a href=\\\"https://docs.scrapy.org/en/latest/topics/items.html\\\">Items</a>, <a href=\\\"https://docs.scrapy.org/en/latest/topics/loaders.html\\\">Itemloaders</a> and <a href=\\\"https://docs.scrapy.org/en/latest/topics/item-pipeline.html\\\">Pipelines</a> creating more structured data was a breeze. Also, scrapy provided a method for cleaning up the sometimes unstructured html table tags. Below is the example code used to scrape elements from those tables. </p>\\n<pre><code class=\\\"language-python\\\"><span class=\\\"hljs-keyword\\\">for</span> row <span class=\\\"hljs-keyword\\\">in</span> table_rows:\\n    il = <span class=\\\"hljs-constructor\\\">ItemLoader(<span class=\\\"hljs-params\\\">item</span>=HrsafindingsItem()</span>, selector=row)\\n    il.add<span class=\\\"hljs-constructor\\\">_value(&#x27;<span class=\\\"hljs-params\\\">year</span>&#x27;, Path(<span class=\\\"hljs-params\\\">response</span>.<span class=\\\"hljs-params\\\">request</span>.<span class=\\\"hljs-params\\\">url</span>)</span>.stem)\\n    il.add<span class=\\\"hljs-constructor\\\">_xpath(&#x27;<span class=\\\"hljs-params\\\">entity</span>&#x27;, &#x27;.<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">th</span><span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">text</span>()</span>&#x27;)\\n    il.add<span class=\\\"hljs-constructor\\\">_xpath(&#x27;<span class=\\\"hljs-params\\\">entity</span>&#x27;, &#x27;.<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">th</span><span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">child</span>::<span class=\\\"hljs-operator\\\">*</span>&#x27;)</span>\\n    il.add<span class=\\\"hljs-constructor\\\">_xpath(&#x27;<span class=\\\"hljs-params\\\">hrsa_id</span>&#x27;, &#x27;.<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">td</span>[1]<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">text</span>()</span>&#x27;)\\n    il.add<span class=\\\"hljs-constructor\\\">_xpath(&#x27;<span class=\\\"hljs-params\\\">hrsa_id</span>&#x27;, &#x27;.<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">td</span>[1]<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">child</span>::<span class=\\\"hljs-operator\\\">*</span>&#x27;)</span>\\n    il.add<span class=\\\"hljs-constructor\\\">_xpath(&#x27;<span class=\\\"hljs-params\\\">state</span>&#x27;, &#x27;.<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">td</span>[2]<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">text</span>()</span>&#x27;)\\n    il.add<span class=\\\"hljs-constructor\\\">_xpath(&#x27;<span class=\\\"hljs-params\\\">state</span>&#x27;, &#x27;.<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">td</span>[2]<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">child</span>::<span class=\\\"hljs-operator\\\">*</span>&#x27;)</span>\\n    il.add<span class=\\\"hljs-constructor\\\">_xpath(&#x27;<span class=\\\"hljs-params\\\">opa_findings</span>&#x27;, &#x27;.<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">td</span>[3]<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">text</span>()</span>&#x27;)\\n    il.add<span class=\\\"hljs-constructor\\\">_xpath(&#x27;<span class=\\\"hljs-params\\\">opa_findings</span>&#x27;, &#x27;.<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">td</span>[3]<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">child</span>::<span class=\\\"hljs-operator\\\">*</span>&#x27;)</span>\\n    il.add<span class=\\\"hljs-constructor\\\">_xpath(&#x27;<span class=\\\"hljs-params\\\">sanction</span>&#x27;, &#x27;.<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">td</span>[4]&#x27;)</span>\\n    il.add<span class=\\\"hljs-constructor\\\">_xpath(&#x27;<span class=\\\"hljs-params\\\">cap_status</span>&#x27;, &#x27;.<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">td</span>[5]<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">text</span>()</span>&#x27;)\\n    il.add<span class=\\\"hljs-constructor\\\">_xpath(&#x27;<span class=\\\"hljs-params\\\">cap_status</span>&#x27;, &#x27;.<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">td</span>[5]<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">child</span>::<span class=\\\"hljs-operator\\\">*</span>&#x27;)</span>\\n    il.add<span class=\\\"hljs-constructor\\\">_xpath(&#x27;<span class=\\\"hljs-params\\\">entity_contact</span>&#x27;, &#x27;.<span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-operator\\\">/</span><span class=\\\"hljs-params\\\">td</span>[6]&#x27;)</span>\\n    yield il.load<span class=\\\"hljs-constructor\\\">_item()</span></code></pre>\\n<p>To get around some of the funny HTML structure, calls to the same item keys, <code>opa_findings</code> for example, are used to concatenate text used in multiple HTML elements. This is necessary due to some of the table rows having sometimes hidden characters or unexpected HTML tags which are not immediately obvious to the naked eye.</p>\\n<p>In addition, custom functions were used to further sanitize the data, including regular expressions to &quot;tag&quot; each record based on finding type for better filtering. An example of a parsed row is below:</p>\\n<pre><code class=\\\"language-json\\\">{\\n    <span class=\\\"hljs-attr\\\">&quot;year&quot;</span>: <span class=\\\"hljs-string\\\">&quot;fy-20-results&quot;</span>,\\n    <span class=\\\"hljs-attr\\\">&quot;entity&quot;</span>: <span class=\\\"hljs-string\\\">&quot;Ascension Seton DBA Ascension Seton Medical Center Austin&quot;</span>,\\n    <span class=\\\"hljs-attr\\\">&quot;hrsa_id&quot;</span>: <span class=\\\"hljs-string\\\">&quot;DSH450056&quot;</span>,\\n    <span class=\\\"hljs-attr\\\">&quot;state&quot;</span>: <span class=\\\"hljs-string\\\">&quot;TX&quot;</span>,\\n    <span class=\\\"hljs-attr\\\">&quot;opa_findings&quot;</span>: <span class=\\\"hljs-string\\\">&quot;No adverse findings&quot;</span>,\\n    <span class=\\\"hljs-attr\\\">&quot;sanction&quot;</span>: <span class=\\\"hljs-string\\\">&quot;None&quot;</span>,\\n    <span class=\\\"hljs-attr\\\">&quot;cap_status&quot;</span>: <span class=\\\"hljs-string\\\">&quot;N/A--Audit closure date: April 29, 2020&quot;</span>,\\n    <span class=\\\"hljs-attr\\\">&quot;entity_contact&quot;</span>: <span class=\\\"hljs-string\\\">&quot;&quot;</span>,\\n    <span class=\\\"hljs-attr\\\">&quot;full_year&quot;</span>: <span class=\\\"hljs-string\\\">&quot;2020&quot;</span>,\\n    <span class=\\\"hljs-attr\\\">&quot;entity_abv&quot;</span>: <span class=\\\"hljs-string\\\">&quot;DSH&quot;</span>,\\n    <span class=\\\"hljs-attr\\\">&quot;closure_date&quot;</span>: <span class=\\\"hljs-string\\\">&quot;April 29, 2020&quot;</span>,\\n    <span class=\\\"hljs-attr\\\">&quot;tags&quot;</span>: <span class=\\\"hljs-string\\\">&quot;no_findings&quot;</span>\\n}</code></pre>\\n<p>With all this a single command <code>scrapy crawl findings_spider</code>, will automatically find all the HRSA Program Integrity HTML tables, parse all those tables, and clean up that data to get a single structured json file.</p>\\n<h4 id=\\\"the-rest-api\\\">The Rest API</h4>\\n<hr>\\n<p>The next step was to make this data easily consumable. I decided to use <a href=\\\"https://flask.palletsprojects.com\\\">Flask</a> and a serialization library called <a href=\\\"https://marshmallow.readthedocs.io\\\">Marshmallow</a> to build out a simple rest api.</p>\\n<h3 id=\\\"the-dashboard\\\">The Dashboard</h3>\\n<hr>\\n<p>Lastly, the dashboard itself was built using Typescript and React.</p>\\n\"}},\"path\":\"projects/hrsa-findings-dashboard\",\"sharedData\":{},\"siteData\":{}}");</script><script defer="" type="text/javascript" src="https://yevgenybulochnik.com/templates/styles.cbe4e1b7.js"></script><script defer="" type="text/javascript" src="https://yevgenybulochnik.com/templates/__react_static_root__/src/containers/Project.0853c3cf.js"></script><script defer="" type="text/javascript" src="https://yevgenybulochnik.com/templates/vendors~main.386d9600.js"></script><script defer="" type="text/javascript" src="https://yevgenybulochnik.com/main.b937522b.js"></script></body></html>